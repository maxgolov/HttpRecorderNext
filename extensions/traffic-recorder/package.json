{
  "name": "traffic-cop",
  "displayName": "Traffic Cop: HTTP Traffic Recorder for Test Automation",
  "description": "Comprehensive HTTP traffic recorder supporting 20+ test frameworks (Playwright, Jest, Pytest, JUnit, etc.) with automatic detection, Dev Proxy integration, and HAR file generation for debugging, mocking, and performance analysis",
  "version": "0.7.10",
  "publisher": "MaxGolovanov",
  "icon": "icon.png",
  "repository": {
    "type": "git",
    "url": "https://github.com/maxgolov/HttpRecorderNext.git"
  },
  "engines": {
    "vscode": "^1.105.0",
    "node": ">=20.0.0"
  },
  "categories": [
    "Testing",
    "Debuggers",
    "Other"
  ],
  "keywords": [
    "traffic-recorder",
    "http-proxy",
    "dev-proxy",
    "playwright",
    "jest",
    "vitest",
    "pytest",
    "junit",
    "har",
    "http",
    "recording",
    "testing",
    "devtools",
    "network",
    "proxy",
    "e2e",
    "integration-testing",
    "test-automation",
    "network-capture",
    "traffic-analysis"
  ],
  "extensionDependencies": [],
  "extensionPack": [],
  "extensionKind": [
    "workspace"
  ],
  "activationEvents": [
    "onCommand:traffic-recorder.startProxy",
    "onCommand:traffic-recorder.stopProxy",
    "onCommand:traffic-recorder.runTests"
  ],
  "main": "./dist/extension.js",
  "contributes": {
    "mcpServerDefinitionProviders": [
      {
        "id": "trafficCopMcp",
        "label": "Traffic Cop - HAR Analysis"
      }
    ],
    "commands": [
      {
        "command": "traffic-recorder.startProxy",
        "title": "Traffic Cop: Start Dev Proxy",
        "icon": "$(record)"
      },
      {
        "command": "traffic-recorder.stopProxy",
        "title": "Traffic Cop: Stop Dev Proxy",
        "icon": "$(debug-stop)"
      },
      {
        "command": "traffic-recorder.runTests",
        "title": "Traffic Cop: Run All Tests",
        "icon": "$(play)"
      },
      {
        "command": "traffic-recorder.runPlaywrightTests",
        "title": "Traffic Cop: Record Playwright Tests",
        "icon": "$(beaker)"
      },
      {
        "command": "traffic-recorder.runVitestTests",
        "title": "Traffic Cop: Record Vitest Tests",
        "icon": "$(beaker)"
      },
      {
        "command": "traffic-recorder.runNpmTests",
        "title": "Traffic Cop: Record npm Tests",
        "icon": "$(beaker)"
      },
      {
        "command": "traffic-recorder.runPytestTests",
        "title": "Traffic Cop: Record pytest Tests",
        "icon": "$(beaker)"
      },
      {
        "command": "traffic-recorder.installDevProxy",
        "title": "Traffic Cop: Install Dev Proxy",
        "icon": "$(cloud-download)"
      },
      {
        "command": "trafficRecorder.previewHAR",
        "title": "Traffic Cop: Preview HAR File",
        "icon": "$(open-preview)"
      },
      {
        "command": "trafficRecorder.openRawHAR",
        "title": "Traffic Cop: Open HAR as JSON",
        "icon": "$(file-code)"
      },
      {
        "command": "traffic-recorder.runCurrentTest",
        "title": "Traffic Cop: Run Current Test File",
        "icon": "$(run)"
      }
    ],
    "menus": {
      "explorer/context": [
        {
          "when": "resourceExtname == .har",
          "command": "trafficRecorder.previewHAR",
          "group": "navigation"
        },
        {
          "when": "resourceExtname == .har",
          "command": "trafficRecorder.openRawHAR",
          "group": "1_open"
        }
      ],
      "editor/title": [
        {
          "when": "resourceExtname == .har",
          "command": "trafficRecorder.previewHAR",
          "group": "navigation"
        },
        {
          "when": "resourceExtname == .har",
          "command": "trafficRecorder.openRawHAR",
          "group": "navigation"
        },
        {
          "when": "resourceFilename =~ /\\.(spec|test)\\.ts$/ && editorLangId == typescript",
          "command": "traffic-recorder.runCurrentTest",
          "group": "navigation"
        }
      ]
    },
    "customEditors": [
      {
        "viewType": "trafficRecorder.harViewer",
        "displayName": "HAR Viewer",
        "selector": [
          {
            "filenamePattern": "*.har"
          }
        ],
        "priority": "default"
      }
    ],
    "views": {
      "explorer": [
        {
          "id": "trafficRecorderStatus",
          "name": "Traffic Recorder"
        }
      ]
    },
    "viewsWelcome": [
      {
        "view": "trafficRecorderStatus",
        "contents": "No workspace folder open.\n[Open Folder](command:vscode.openFolder)"
      }
    ],
    "configuration": {
      "title": "Traffic Recorder",
      "properties": {
        "trafficRecorder.devProxyHost": {
          "type": "string",
          "default": "localhost",
          "description": "Host for Dev Proxy to listen on"
        },
        "trafficRecorder.devProxyPort": {
          "type": "number",
          "default": 8080,
          "description": "Port for Dev Proxy to listen on"
        },
        "trafficRecorder.outputDirectory": {
          "type": "string",
          "default": "./.http-recorder",
          "description": "Directory to save HAR recordings"
        },
        "trafficRecorder.autoStart": {
          "type": "boolean",
          "default": false,
          "description": "Automatically start Dev Proxy when running tests"
        },
        "trafficRecorder.autoDetectFrameworks": {
          "type": "boolean",
          "default": true,
          "markdownDescription": "Automatically detect test frameworks in workspace. When enabled, the extension will scan for 20+ popular test frameworks (Playwright, Jest, Vitest, Pytest, JUnit, etc.) and show quick-run buttons in the sidebar."
        },
        "trafficRecorder.useBetaVersion": {
          "type": "boolean",
          "default": true,
          "description": "Use Dev Proxy Beta version for latest features"
        },
        "trafficRecorder.asSystemProxy": {
          "type": "boolean",
          "default": false,
          "description": "Register Dev Proxy as system proxy (modifies Windows proxy settings)"
        },
        "trafficRecorder.useLocalPlugin": {
          "type": "boolean",
          "default": false,
          "description": "Use locally built HttpRecorder.DevProxy plugin instead of downloading from NuGet (for development)"
        },
        "trafficRecorder.playwrightCommand": {
          "type": "string",
          "default": "npx playwright test",
          "description": "Command to run Playwright tests"
        },
        "trafficRecorder.playwrightArgs": {
          "type": "string",
          "default": "--headed",
          "description": "Additional arguments for Playwright test command"
        }
      }
    }
  },
  "scripts": {
    "vscode:prepublish": "npm run build-all",
    "build": "npm run build:extension && npm run build:mcp",
    "build:extension": "node esbuild.extension.cjs",
    "build:mcp": "node esbuild.mcp.cjs",
    "watch": "node esbuild.extension.cjs --watch",
    "pretest": "npm run build && npm run build:test",
    "build:test": "node esbuild.test.cjs",
    "test": "node ./dist/test/runTest.js",
    "test:unit": "vitest",
    "test:ui": "vitest --ui",
    "test:playlist": "playwright test",
    "lint": "eslint src --ext ts",
    "prebuild": "npm run build-viewer && npm run build-plugin",
    "build-viewer": "cd har-viewer && npm run build",
    "build-plugin": "dotnet build ../../DevProxyExtension/HttpRecorder.DevProxy/HttpRecorder.DevProxy.csproj -c Release && pwsh -Command \"Copy-Item '../../DevProxyExtension/HttpRecorder.DevProxy/bin/Release/net9.0/HttpRecorder.DevProxy.dll' './plugins/' -Force; Copy-Item '../../HttpRecorder/bin/Release/net9.0/HttpRecorder.dll' './plugins/' -Force\"",
  "build-all": "npm run build-viewer && npm run build-plugin && npm run build:extension && npm run build:mcp",
  "package": "vsce package",
    "install-extension": "code --install-extension traffic-recorder-0.1.0.vsix",
    "copy-scripts": "node ./scripts/copy-to-user-dir.js"
  },
  "dependencies": {
    "@modelcontextprotocol/sdk": "^1.0.4",
    "execa": "^9.6.0",
    "jsonrepair": "^3.13.1",
    "tree-kill": "^1.2.2",
    "zod": "^3.24.1"
  },
  "devDependencies": {
    "@playwright/test": "^1.56.1",
    "@types/glob": "^9.0.0",
    "@types/mocha": "^10.0.10",
    "@types/node": "^24.10.0",
    "@types/vscode": "^1.105.0",
    "@typescript-eslint/eslint-plugin": "^8.46.3",
    "@typescript-eslint/parser": "^8.46.3",
    "@vitest/ui": "^4.0.7",
    "@vscode/test-electron": "^2.5.2",
    "@vscode/vsce": "^3.6.2",
    "esbuild": "^0.25.12",
    "eslint": "^9.39.1",
    "glob": "^11.0.3",
    "mocha": "^11.7.5",
    "typescript": "^5.9.3",
    "vite": "^7.2.1",
    "vitest": "^4.0.7"
  }
}
